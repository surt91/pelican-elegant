{% macro publications(publications) %}
    <div class="publications">
        <ol class="publication">
            {% for publication in publications %}
                <li>
                    <div class="pub-container">
                        <div class="pub-title">{{ publication.title }}</div>
                        <div class="pub-authors">{{ publication.authors }}</div>
                        <div class="pub-journalref">
                            <span class="pub-journal">{{ publication.journal }}</span>
                            <span class="pub-volume">{{ publication.volume }},</span>
                            <span class="pub-number">{{ publication.number }}</span>
                            (<span class="pub-year">{{ publication.year }}</span>)
                        </div>

                        <div class="pub-links">
                            {% if publication.comment %}
                                <!-- {{ publication.comment }} -->
                            {% endif %}
                            <a class="pub-download nowrap" href="/pdf/{{ publication.pdf }}"><i class="fas fa-download" aria-hidden="true"></i> {% trans %}Download{% endtrans %}</a>,
                            <a class="pub-doi nowrap" href="https://dx.doi.org/{{ publication.doi }}" rel="nofollow" rel="noopener" target="_blank" aria-label="DOI"><i class="ai ai-doi" aria-hidden="true"></i> {{ publication.doi }}</a>{% if publication.arxiv %},
                                <a class="pub-arxiv nowrap" href="https://arxiv.org/abs/{{ publication.arxiv }}" rel="nofollow" rel="noopener" target="_blank"><i class="ai ai-arxiv" aria-hidden="true"></i> {{ publication.arxiv_long }}</a>
                            {% endif %}
                        </div>

                        {% if publication.supplementary %}
                        <div class="pub-supplementary">
                            {% for id in publication.supplementary %}
                                {% set supp = documents[id] %}
                                <span class="pub-supp-title">{{supp.title}}</span>
                                <a class="pub-download nowrap"
                                    {% if supp.pdf %}
                                        href="/pdf/{{ supp.pdf }}"
                                    {% else supp.link %}
                                        href="{{ supp.link }}"
                                    {% endif %}
                                >
                                {% if supp.type == "text" %}
                                    <i class="fas fa-file-alt fa-fw" aria-hidden="true" title="{% trans %}Text{% endtrans %}"></i>
                                {% elif supp.type == "code" %}
                                    <i class="fas fa-code fa-fw" aria-hidden="true" title="{% trans %}Code{% endtrans %}"></i>
                                {% endif %}
                                </a>
                            {% endfor %}
                            <a class="pub-doi nowrap" href="https://dx.doi.org/{{ publication.doi }}" rel="nofollow" rel="noopener" target="_blank" aria-label="DOI"><i class="ai ai-doi" aria-hidden="true"></i> {{ supp.doi }}</a>
                        </div>
                        {% endif %}

                        {% if publication.related %}
                            <div class="pub-related">
                                <ul>
                                    {% for id in publication.related %}
                                        {% set related = documents[id] %}
                                        <li>
                                            <a class="pub-download nowrap"
                                                {% if related.pdf %}
                                                    href="/pdf/{{ related.pdf }}"
                                                {% elif %}
                                                    href="{{ related.link }}"
                                                {% endif %}
                                            >
                                                {% if presentation.type == "thesis" %}
                                                    <i class="fas fa-book-open fa-fw" aria-hidden="true" title="{% trans %}Thesis{% endtrans %}"></i>
                                                {% elif presentation.type == "talk" %}
                                                    <i class="fas fa-comment fa-fw" aria-hidden="true" title="{% trans %}Talk{% endtrans %}"></i>
                                                {% elif presentation.type == "poster" %}
                                                    <i class="fas fa-file fa-fw" aria-hidden="true" title="{% trans %}Poster{% endtrans %}"></i>
                                                {% endif %}
                                            </a>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        {% endif %}
                    </div>
                </li>
            {% endfor %}
        </ol>
    </div>
{% endmacro %}

{% macro preprints(preprints, num=1) %}
    <div class="publications">
        <ol class="publication" start="{{ num }}">
            {% for preprint in preprints %}
                <li>
                    <div class="pub-title">{{ preprint.title }}</div>
                    <div class="pub-authors">{{ preprint.authors }}</div>

                    <div class="pub-links">
                        <a class="pub-download nowrap" href="/pdf/{{ preprint.pdf }}"><i class="fas fa-download" aria-hidden="true"></i> {% trans %}Download{% endtrans %}</a>,
                        <a class="pub-arxiv nowrap" href="https://arxiv.org/abs/{{ preprint.arxiv }}" rel="nofollow" rel="noopener" target="_blank"><i class="ai ai-arxiv" aria-hidden="true"></i> {{ preprint.arxiv_long }}</a>
                    </div>
                </li>
            {% endfor %}
        </ol>
    </div>
{% endmacro %}
